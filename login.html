<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تسجيل الدخول - TAFLIM</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-color:#0b0f12;
    --card-bg:#161b20;
    --accent:#ff3b3b;
    --text-color:#e6e6e6;
    --hover-bg:#1f242a;
    --transition:0.3s ease;
  }
  *{margin:0;padding:0;box-sizing:border-box;font-family:"Tajawal",sans-serif;}
  body{background:var(--bg-color);color:var(--text-color);display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;}
  
  .login-container{
    background:var(--card-bg);
    padding:30px 25px;
    border-radius:12px;
    width:100%;
    max-width:400px;
    box-shadow:0 6px 20px rgba(0,0,0,0.5);
    text-align:center;
  }

  .login-container h2{
    text-align:center;
    margin-bottom:20px;
    color:var(--accent);
  }

  .login-container label{
    display:block;
    margin:10px 0 5px;
    font-weight:500;
  }

  .login-container input{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:none;
    background:var(--hover-bg);
    color:var(--text-color);
    font-size:1em;
  }

  .login-container input:focus{
    outline:none;
    box-shadow:0 0 5px var(--accent);
  }

  .login-container button{
    width:100%;
    margin-top:15px;
    padding:10px;
    border:none;
    border-radius:8px;
    background:var(--accent);
    color:#fff;
    font-size:1em;
    font-weight:bold;
    cursor:pointer;
    transition:var(--transition);
  }

  .login-container button:hover{
    background:#e63939;
  }

  .login-container .secondary-btn{
    background:var(--hover-bg);
    color:var(--text-color);
    margin-top:10px;
  }

  .login-container .secondary-btn:hover{
    background:#1a1f25;
  }

  .error-message{
    color:#ff4d4d;
    margin-top:10px;
    display:none;
    text-align:center;
  }

  /* رابط العودة أسفل الإطار */
  .back-home {
    margin-top: 20px;
    color: var(--text-color);
    cursor: pointer;
    transition: 0.3s;
    text-decoration: underline;
  }

  .back-home:hover {
    color: var(--accent);
  }

</style>
</head>
<body>

<div class="login-container">
  <h2>تسجيل الدخول</h2>

  <label for="username">اسم المستخدم</label>
  <input type="text" id="username" placeholder="ادخل اسم المستخدم">
  
  <label for="password">كلمة المرور</label>
  <input type="password" id="password" placeholder="ادخل كلمة المرور">
  
  <button id="login-btn">تسجيل الدخول</button>
  <button class="secondary-btn" id="register-btn">فتح حساب جديد</button>

  <div class="error-message" id="error-msg">اسم المستخدم أو كلمة المرور غير صحيحة</div>
  <div class="error-message" id="locked-msg">تم تجاوز عدد المحاولات المسموح بها. حاول لاحقاً.</div>
</div>

<!-- رابط العودة أسفل الإطار -->
<div class="back-home" id="home-link">العودة للصفحة الرئيسية</div>

<script>
  const loginBtn = document.getElementById('login-btn');
  const registerBtn = document.getElementById('register-btn');
  const homeLink = document.getElementById('home-link');
  const errorMsg = document.getElementById('error-msg');
  const lockedMsg = document.getElementById('locked-msg');

  // بيانات تجريبية (يمكن ربطها لاحقًا بالباكند)
  const USER_CREDENTIALS = { username: "admin", password: "123456" };
  const MAX_ATTEMPTS = 5;
  let attempts = parseInt(localStorage.getItem("loginAttempts")) || 0;

  // تحقق من حالة تسجيل الدخول
  if(localStorage.getItem("isLoggedIn") === "true"){
    window.location.href = "dashboard.html";
  }

  loginBtn.addEventListener('click', async () => {
    if(attempts >= MAX_ATTEMPTS){
      lockedMsg.style.display = "block";
      return;
    }

    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    if(username === USER_CREDENTIALS.username && password === USER_CREDENTIALS.password){
      localStorage.setItem("isLoggedIn", "true");
      localStorage.setItem("loginAttempts", "0");
      window.location.href = "dashboard.html";
    } else {
      attempts++;
      localStorage.setItem("loginAttempts", attempts);
      errorMsg.style.display = "block";
      lockedMsg.style.display = "none";
    }
  });

  registerBtn.addEventListener('click', () => {
    window.location.href = "register.html";
  });

  homeLink.addEventListener('click', () => {
    window.location.href = "index.html";
  });
</script>

</body>
</html>
